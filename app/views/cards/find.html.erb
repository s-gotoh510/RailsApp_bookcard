<h1 class="display-5 text-secondary">検索</h1>
<!--<p><#%= @msg %></p>-->

<%= form_with url: cards_find_path, local: true do |f| %>
  <div class="form-group">
    <label for="find">キーワードを入力してください（タイトル、著者名、出版社名）</label>
    <%= f.text_field :find, class: "form-control" %>
  </div>
  
  <div class="my-search">
    <%= f.submit "検索", class: "btn btn-primary" %>
    <%= link_to 'クリア', cards_find_path, class: "btn btn-secondary" %>
  </div>
<% end %>

<table class="table">
  <thead>
    <tr>
      <th>ID</th>
      <th>タイトル</th>
      <th>著者</th>
      <th>価格</th>
      <th>出版社</th>
      <th width="50%">コメント</th>
    </tr>
  </thead>
  
  <% if @flag == true %>
    <% if @cards.present? %>
      <tbody class="table-striped">
        <% @cards.each do |card| %>
          <tr>
            <td><%= card.id %></td>
            <td><%= card.title %></td>
            <td><%= card.author %></td>
            <td><%= card.price %></td>
            <td><%= card.publisher %></td>
            <td><%= card.memo %></td>
          </tr>
        <% end %>
      </tbody>
    <% else %>
      <div class="mt-4 mb-4">検索結果はありませんでした。</div>
    <% end %>
    <% @flag = false %>
  <% end %>
</table>

<div class="mt-4 mb-4">
  <%= link_to '> トップページに戻る', root_path %>
</div>